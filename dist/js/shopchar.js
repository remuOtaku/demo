"use strict";function _defineProperty(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}cookie.get("username")?($("#user a").eq(0).attr("href","javascript:;").children("span").html(cookie.get("username")),$("#main .temp").css("display","none"),$("#main .box").css("display","block")):($("#main .temp").css("display","block"),$("#main .box").css("display","none"));for(var arr=[],arr1=[],i=0;i<=100;i++)localStorage.getItem(i)&&(arr.push(localStorage.getItem(i)),$.ajax({url:"php/more.php",type:"get",dataType:"json",data:{id:i},success:function(e){var r=$(".goodslist");e.forEach(function(e){var i='\n                    <div class="item-box" id="'+e.id+'">\n                        <div class="item-list">\n                            <div class="check">\n                                <i onclick="gou('+e.id+')" class="ischeck">✔</i>\n                            </div>\n                            <div class="img">\n                                <a href="more.html?id='+e.id+'">\n                                    <img src="images/'+e.small+'">\n                                </a>\n                            </div>\n                            <div class="goodsname">'+e.goods+'</div>\n                            <div class="price">'+e.price+'</div>\n                            <div class="num">\n                                <div>\n                                    <a href="javascript:;" onclick="jian('+e.id+')">-</a>\n                                    <input type="text" value="'+localStorage.getItem(e.id)+'">\n                                    <a href="javascript:;" onclick="jia('+e.id+')">+</a>\n                                </div>\n                            </div>\n                            <div class="total">'+localStorage.getItem(e.id)*parseInt(e.price)+'元</div>\n                            <div class="action" onclick="xiaoshi('+e.id+')">x</div>\n                        </div>\n\n                    </div>\n                    ';r.append(i)})}}));function jia(e){if(""==$("#"+e).children().children(".check").children("i").html());else{if(10<=$("#"+e).children().children(".num").children().children("input").val())return;$("#"+e).children().children(".num").children().children("input").val(function(e,i){return parseInt(i)+1}),localStorage.setItem(e,$("#"+e).children().children(".num").children().children("input").val()),$("#"+e).children().children(".total").html(parseInt($("#"+e).children().children(".price").html())*localStorage.getItem(e)+"元"),$(".char-bar>span em").html(parseInt($("#"+e).children().children(".price").html())+parseInt($(".char-bar>span em").html()))}}function jian(e){if(""==$("#"+e).children().children(".check").children("i").html());else{if($("#"+e).children().children(".num").children().children("input").val()<=1)return;$("#"+e).children().children(".num").children().children("input").val(function(e,i){return parseInt(i)-1}),localStorage.setItem(e,$("#"+e).children().children(".num").children().children("input").val()),$("#"+e).children().children(".total").html(parseInt($("#"+e).children().children(".price").html())*localStorage.getItem(e)+"元"),$(".char-bar>span em").html(parseInt($(".char-bar>span em").html())-parseInt($("#"+e).children().children(".price").html()))}}function xiaoshi(e){confirm("是否删除")&&($("#"+e).parent().children("#"+e).remove(),localStorage.removeItem(e),location.reload())}function jisuan(){$(".char-bar .bar-left span i").eq(1).html($(".ischeck").length)}function gou(e){var i=$("#"+e).children().children(".check").children();""==i.html()?(i.html("✔"),i.css("background","#ff6700").css("border-width","0").removeClass("ucheck").addClass("ischeck"),$(".ischeck").length==$(".item-box .check i").length&&$(".list-head .check i").css({background:"#ff6700","border-width":"0"}),$(".char-bar>span em").html(parseInt($(".char-bar>span em").html())+parseInt($("#"+e).children().children(".total").html()))):(i.html(""),i.css("background","#fff").css("border-width","1px").removeClass("ischeck").addClass("ucheck"),$(".list-head .check i").css({background:"#fff","border-width":"1px"}),$(".char-bar>span em").html(parseInt($(".char-bar>span em").html())-parseInt($("#"+e).children().children(".total").html()))),$(".ischeck").length<=0?$(".top-bar").css("display","block"):$(".top-bar").css("display","none"),jisuan()}setTimeout(function(){for(var e=0,i=0;i<$(".item-box .total").length;i++)e+=parseInt($(".item-box .total").eq(i).html());$(".char-bar>span em").html(e)},1e3),$(".char-bar .bar-left span i").eq(0).html(arr.length),$(".char-bar .bar-left span i").eq(1).html(arr.length),$(".list-head .check i").on("click",function(){""==$(this).html()?($(this).html("✔"),$(".check i").css("background","#ff6700").css("border-width","0"),0<$(".goodslist").find(".item-box").length&&$(".item-box .item-list .check i").html("✔"),$(".top-bar").css("display","none"),setTimeout(function(){for(var e=0,i=0;i<$(".item-box .total").length;i++)e+=parseInt($(".item-box .total").eq(i).html());$(".char-bar>span em").html(e)},300),$(".char-bar .clear").css("background","#ff6700").css("color","#fff").css({"border-color":"#ff6700",cursor:"pointer"})):($(this).html(""),$(".check i").css("background","#fff").css("border-width","1px"),0<$(".goodslist").find(".item-box").length&&$(".item-box .item-list .check i").html(""),$(".top-bar").css("display","block"),$(".char-bar .clear").css(_defineProperty({background:"#e0e0e0",color:"#e0e0e0","border-color":"#e0e0e0",cursor:"default"},"color","#fff")),$(".char-bar>span em").html(0))});